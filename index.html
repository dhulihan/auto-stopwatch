<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">

		<title>dhulihan/auto-stopwatch</title>
		
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			html {
				background: #333;
				color: #fff;
				font-family: Menlo, sans-serif;
			}

			.stopwatch {
				font-size: 20vw;
				height: 100%;
				line-height: 100vh;
				text-align: center;
				text-shadow: 0 5px 20px #000;
				font-family: Menlo;
				cursor: pointer;
			}
		</style>
	</head>

	<body>
		<a href="https://github.com/dhulihan/auto-stopwatch" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>	
		<div class="stopwatch" onclick="Stopwatch.toggle()">
			<span id="mins">00</span><span class="delimiter">:</span><span id="secs">00</span><!--<span class="delimiter">:</span><span id="ms">00</span>-->
		</div>

		<script>
			function pad(n, width, z) {
			  z = z || '0';
			  n = n + '';
			  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
			}

			var Stopwatch = (function() {
				var s;
				return {
					settings: {
						stop: 0,
						intervalMs: 1000,
					},
					init: function() {
						s = this.settings;
						var start = new Date().getTime(),
							elapsed = '0.0',
							stoppedMs = 0;
						window.setInterval(function()
						{
							if(!s.stop){
							    var msPassed = new Date().getTime() - start;
							    var timedMs = msPassed - stoppedMs;
							    var minutes = Math.floor(timedMs / 1000 / 60);
							    document.getElementById("mins").innerHTML = pad(minutes, 2);
							    
							    var seconds = Math.floor(timedMs / 1000) % 60;
							    document.getElementById("secs").innerHTML = pad(seconds, 2);
							    
							    // var millis = 0
							    // $("#ms").html(pad(millis, 2));
								
								//console.log("raw timedMs: " + timedMs);
							    //console.log("minutes: " + minutes);
							    //console.log("seconds: " + seconds);
							    //console.log("ms: " + millis);

							    // elapsed = Math.floor(timedMs / 100) / 10;  
							    // if(Math.round(elapsed) == elapsed) { elapsed += '.0'; }
							    document.title = (pad(minutes, 2) + ":" + pad(seconds, 2));
							} else {
								stoppedMs = stoppedMs + s.intervalMs;
							}
						}, s.intervalMs);
					},
					start: function() {
						s.stop = 0;
					},
					stop: function() {
						s.stop = 1;
					},
					toggle: function() {
						//console.log("toggle called. stop: " + s.stop);
						s.stop = 1 - s.stop;
					}
				};
			})();
			Stopwatch.init();
		</script>	
	</body>
</html>
